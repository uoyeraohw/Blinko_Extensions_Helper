# Blinko 网页剪藏助手

一款专为Blinko设计的Chrome浏览器扩展，提供网页剪藏、AI智能总结和快速笔记功能。

## ✨ 功能特性

### 📝 核心功能
- **网页剪藏**: 一键提取网页正文并转换为Markdown格式
- **AI智能总结**: 使用OpenAI兼容API对网页内容进行智能总结
- **快速笔记**: 在任何页面快速记录想法
- **草稿自动保存**: 输入内容自动保存，防止意外丢失（⭐新功能）
- **离线队列**: 网络不可用时自动暂存笔记，恢复后自动提交（⭐新功能）
- **模板系统**: 支持自定义提示词模板，可根据域名自动匹配
- **AI模板优化**: 一键将简单提示词转换为专业system prompt，采用场景引导型优化策略
- **图片管理**: 支持图片原链接保留或上传到S3存储
- **标签系统**: 为不同场景配置默认标签
- **右键菜单扩展**: 保存整页、截图、使用模板等快捷操作（⭐新功能）

### 🎯 主要特点
- 🌍 **多语言支持**: 完整的中英双语界面，自动语言检测
- 💾 **数据安全**: 草稿自动保存 + 离线队列，零数据丢失
- ⚡ **快速操作**: 右键菜单一键保存整页/截图/模板总结
- 🔄 **智能重试**: 网络恢复后自动提交离线笔记
- 与Blinko无缝集成
- 支持任何OpenAI兼容的API服务
- 灵活的域名特定模板规则
- 配置导入/导出功能
- 简洁现代的用户界面

## 🚀 安装

### 从源码安装（开发者模式）

1. 克隆或下载本项目到本地
2. 打开Chrome浏览器，访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择本项目的根目录

### 从Chrome Web Store安装

（待发布后更新）

## ⚙️ 配置说明

首次使用需要在设置页面进行配置：

### 1. Blinko配置
- **API URL**: 您的Blinko服务地址
- **Authorization**: Blinko的访问令牌
- 点击"验证"按钮测试连接

### 2. OpenAI配置（可选，用于AI总结）
- **Base URL**: OpenAI API地址（默认：https://api.openai.com/v1）
- **API Key**: 您的API密钥
- **Model**: 使用的模型（默认：gpt-4o-mini）

### 3. 模板管理（可选）
- 创建自定义总结模板（模板将作为system prompt使用）
- **AI优化功能**：一键将简单提示词转换为专业system prompt
  - 智能识别用户意图（总结、提取、分析等）
  - 针对特定网站（GitHub、知乎等）提供领域知识优化
  - 需要先配置OpenAI，会消耗少量API额度（约$0.002-0.003/次）
- 配置域名特定规则，为不同网站使用不同的模板

### 4. S3存储配置（可选）
- 如果需要图片转存功能，配置S3兼容存储
- 支持自定义CDN和存储路径

## 📖 使用指南

### 网页剪藏
1. 在任意网页点击扩展图标
2. 选择"剪藏"标签页
3. 点击"提取网页正文"或"提取并总结网页内容"
4. 预览并编辑内容
5. 选择笔记类型（闪念/笔记/提醒）
6. 点击"提交"保存到Blinko

### 快速笔记
1. 点击扩展图标
2. 选择"速写"标签页
3. 输入内容（自动保存草稿）
4. 点击"提交"

### 草稿管理（⭐新功能）
- **自动保存**：输入内容会每2秒自动保存，关闭窗口也不会丢失
- **草稿恢复**：重新打开扩展时会提示恢复未完成的草稿
- **命名草稿**：点击"保存为草稿"可以保存多个不同主题的草稿
- **草稿管理**：点击"草稿管理"查看、加载、删除草稿

### 离线队列（⭐新功能）
- **自动入队**：网络不可用或服务器错误时，笔记会自动加入离线队列
- **自动重试**：网络恢复后自动提交队列中的笔记（智能重试策略）
- **手动管理**：在设置页面查看队列状态，可手动重试或删除

### 右键菜单快捷操作（⭐新功能）
- **保存选中内容**：选中文本后右键快速保存
- **保存图片**：图片上右键快速保存
- **保存链接**：链接上右键快速保存
- **保存整个页面**：右键空白处保存完整页面为Markdown
- **保存页面截图**：右键空白处保存当前可视区域截图
- **使用模板**：右键选择模板，快速总结当前页面

### 设置管理
- 点击扩展图标中的"设置"标签
- 或右键扩展图标选择"选项"

## 🛠️ 开发

### 目录结构
```
blinko_plugin/
├── manifest.json           # 扩展清单文件
├── src/
│   ├── popup.html         # 弹出窗口
│   ├── popup.js           # 弹出窗口逻辑
│   ├── settings.html      # 设置页面
│   ├── settings.js        # 设置页面逻辑
│   ├── content-script.js  # 内容脚本
│   ├── background.js      # 后台脚本
│   ├── utils/             # 工具函数
│   │   ├── storage.js
│   │   ├── html-to-markdown.js
│   │   ├── api-client.js
│   │   ├── s3-uploader.js
│   │   └── template-matcher.js
│   └── styles/            # 样式文件
│       ├── popup.css
│       └── settings.css
├── icons/                 # 扩展图标
└── dist/                  # 构建输出
```

### 开发命令
```bash
# 安装依赖
npm install

# 代码检查
npm run lint

# 打包扩展
npm run pack
```

## 🌍 国际化（多语言支持）

### 支持的语言
- **中文（简体）** - 默认语言
- **English** - 完整英文支持

### 语言切换
1. 打开扩展设置页面
2. 切换到"通用设置" Tab
3. 在"语言设置"中选择你的语言：
   - **自动（跟随浏览器）** - 根据浏览器语言自动切换
   - **中文（简体）** - 强制使用中文
   - **English** - Force English interface
4. 点击"立即刷新"应用新语言

### 为开发者
- 基于 Chrome Extensions 官方 i18n API
- 语言包位于 `_locales/{locale}/messages.json`
- 易于扩展更多语言
- 详见 `docs/i18n-guide.md`

## 📝 笔记类型说明

- **闪念** (Flash, 0): 快速记录的想法和灵感
- **笔记** (Note, 1): 完整的笔记内容
- **提醒** (Reminder, 2): 需要后续处理的事项

## 🔒 隐私与安全

- 所有配置数据存储在本地Chrome Storage中
- API密钥使用浏览器加密机制保护
- 不收集任何用户数据
- 仅与用户配置的服务器通信

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📮 联系方式

如有问题或建议，请通过GitHub Issues联系。

---

**注意**: 本扩展需要配合Blinko服务使用。AI总结功能需要OpenAI兼容的API服务。



